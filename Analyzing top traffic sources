Traffic source analysis is about understanding whee your customers are coming from and which channels are driving the highest quality traffic. 

We will be looking at the traffic sources (email, social media, search, direct) and the conversion rates. 

Common Use Cases 
Analyzing search data and shifting budget towards the engines, campaign or keywords driving the strongest conversion rates. 
Comparing user behavior patterns across traffic sources to inform creative and messaging strategy. 
Identifying opportunities to eliminate wasted spend or scale high converting traffic. 

Key Tables - 
website_sessions
website_pageviews
orders

Note - UTM tracking parameters are used to campaign our paid marketting activities, and stands for urchin tracking module. 

UTM 
Paid traffic is commonly tagged with UTM parameters, which are appended to URLs and allow us to tie website activity back to specific traffic sources and campaigns. 

SELECT 
    website_sessions.utm_content,
    COUNT(DISTINCT website_sessions.website_session_id) AS sessions,
    COUNT(DISTINCT orders.order_id) AS orders,
    COUNT(DISTINCT orders.order_id)/COUNT(DISTINCT website_sessions.website_session_id) as session_to_order_conv_rate
FROM
    website_sessions
    left join orders on orders.website_session_id = website_sessions.website_session_id
WHERE
    website_sessions.website_session_id BETWEEN 1000 AND 2000
GROUP BY utm_content
ORDER BY sessions DESC;
